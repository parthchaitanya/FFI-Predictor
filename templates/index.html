<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ðŸ”¥ Forest Fire Risk Predictor</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap & custom style -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- HEADER -->
<header class="py-3 mb-4 shadow-sm bg-dark border-bottom border-warning">
    <div class="container text-center text-light">
        <h1 class="fw-bold">ðŸ”¥ Forest Fire Risk Predictor</h1>
        <p class="text-light mb-0">Predict wildfire risk using real-world environmental factors</p>
    </div>
</header>

<!-- MAIN FORM CARD -->
<div class="container">
    <div class="card mx-auto p-4 mt-3 shadow-lg">
        <h3 class="text-center text-warning mb-4">Enter Environmental Data</h3>

        <form action="/predictdata" method="POST" class="row g-3">
            {% set fields = [
                ('Temperature', 'Temperature (Â°C)', 'Air temperature in Celsius'),
                ('RH', 'Relative Humidity (%)', 'Moisture content in the air'),
                ('Ws', 'Wind Speed (km/h)', 'Average wind speed'),
                ('Rain', 'Rainfall (mm)', 'Total rainfall in millimeters'),
                ('FFMC', 'Fine Fuel Moisture Code', 'Dryness of fine surface litter'),
                ('DMC', 'Duff Moisture Code', 'Dryness of decomposed organic material'),
                ('ISI', 'Initial Spread Index', 'Rate of potential fire spread'),
                ('Classes', 'Fire Class (0 = Low, 1 = High)', 'Category of fire intensity'),
                ('Region', 'Region (1 = Bejaia, 2 = Sidi Bel-abbes)', 'Geographical region')
            ] %}

            {% for name, label, desc in fields %}
            <div class="col-md-4">
                <label class="form-label">{{ label }}</label>
                <input type="number" step="any" name="{{ name }}" class="form-control"
                       value="{{ old[name] if old else '' }}" required>
                <small>{{ desc }}</small>
            </div>
            {% endfor %}

            <div class="col-12 text-center mt-3">
                <button type="submit" class="btn btn-warning px-5 py-2 fw-bold shadow-sm">
                    Predict Fire Risk
                </button>
            </div>
        </form>

        {% if results is not none %}
        <div id="riskBox" class="result-box text-center mt-5 p-4 rounded">
            <h4 class="fw-semibold mb-2">Predicted Fire Risk Level:</h4>
            <div class="display-6 fw-bold result-value">
                {% if results is number %}
                    {{ results | round(2) }}
                {% else %}
                    {{ results }}
                {% endif %}
            </div>
            <p id="riskMessage" class="mt-3"></p>
        </div>

        <script>
            const result = parseFloat("{{ results }}");
            const box = document.getElementById("riskBox");
            const msg = document.getElementById("riskMessage");

            if (!isNaN(result)) {
                if (result < 0.4) {
                    box.style.borderColor = "#00e676";
                    box.style.boxShadow = "0 0 25px rgba(0, 230, 118, 0.4)";
                    msg.textContent = "âœ… Low fire risk â€” conditions are stable.";
                } else if (result < 0.7) {
                    box.style.borderColor = "#ff9800";
                    box.style.boxShadow = "0 0 25px rgba(255, 152, 0, 0.4)";
                    msg.textContent = "âš ï¸ Moderate fire risk â€” stay alert.";
                } else {
                    box.style.borderColor = "#ff1744";
                    box.style.boxShadow = "0 0 25px rgba(255, 23, 68, 0.4)";
                    msg.textContent = "ðŸš¨ High fire risk â€” extreme caution advised!";
                }
            }
        </script>
        {% else %}
        <p class="text-center mt-4 text-light">Enter all values to calculate fire risk ðŸ”¥</p>
        {% endif %}
    </div>
</div>

<!-- FOOTER -->
<footer class="text-center mt-5 py-3 border-top border-secondary text-secondary small">
    Developed for Wildfire Monitoring â€” Â© {{ now().year if now else "2025" }}
</footer>

</body>
</html>

